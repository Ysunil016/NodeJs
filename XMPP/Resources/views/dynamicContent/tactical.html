<style>
tr:after {
    clear: both;
    content: ' ';
    display: block;
    visibility: hidden;
}

thead, tbody{
    display: block;
}

thead th {
    height: 30px;
}

tbody {
    overflow-y: auto;
    /*height: calc(100vh - 246px);*/
}
</style>

<link rel="stylesheet" href="../assets/css/tactical/Leaflet.PolylineMeasure.css" />

<script id="tacticalCOPTrack" type="text/x-handlebars-template">
    {{#each [] as |track_data|}}   
    <tr class="row m-0" onclick="showTrackDetailInTote('{{JSON track_data}}')">
        {{#if mmsi}}
        <th class="col-md-3 col-xs-3" scope="row" >{{mmsi}}</th>
        <th class="col-md-3 col-xs-3" scope="row" >MSIS</th>
        {{else}}
        {{#if net_unit}}
        <th class="col-md-3 col-xs-3" scope="row">Force</th>                
        {{else}}
        <th class="col-md-3 col-xs-3" scope="row">{{track_label}}</th>                        
        {{/if}}
        <th class="col-md-3 col-xs-3" scope="row">{{rep_unit_name}}</th>
        {{/if}}
        <td class="col-md-3 col-xs-3">{{range}}</td>
        <td class="col-md-3 col-xs-3">{{bearing}}</td>                        
    </tr>
    {{/each}}
</script>

<script id="track_tote_area_template" type="text/x-handlebars-template">
                <!--{{#if mmsi}}
                <div class="card-body bg-tac">REP: <span class="card-header text-center float-right">MSIS</span></div>                 
                {{else}}
                <div class="card-body bg-tac">REP: <span class="card-header text-center float-right">{{rep_unit_name}}{{net_unit}}</span></div>                                                 
                {{/if}}-->

                 <div class="row m-0">
                    <div class="col-md-6 card-body bg-tic"><span class="key">RNG: </span><span class="value">{{range}} nm</span></div>   
                    <div class="col-md-6 card-body bg-tic"><span class="key">LBL: </span><span class="value">{{track_label}}</span></div>                     
                </div>  
                <div class="row m-0">
                    <div class="col-md-6 card-body bg-tac"><span class="key">BRG: </span><span class="value">{{bearing}} deg</span></div>   
                    <div class="col-md-6 card-body bg-tac"><span class="key">CPA: </span><span class="value"></span></div>                     
                </div>  
                <div class="row m-0">          
                    <div class="col-md-6 card-body bg-tic"><span class="key">CRS: </span><span class="value">{{course}} deg</span></div>                   
                    <div class="col-md-6 card-body bg-tic"><span class="key">BCPA: </span><span class="value"></span></div>     
                </div>  
                <div class="row m-0">          
                    <div class="col-md-6 card-body bg-tac"><span class="key">SPD: </span><span class="value">{{speed}} Knots</span></div>                          
                    <div class="col-md-6 card-body bg-tac"><span class="key">TCPA: </span><span class="value"></span></div>     
                </div> 
                <div class="row m-0">          
                    <div class="col-md-6 card-body bg-tac"><span class="key">CAT: </span><span class="value">{{category}}</span></div>                          
                    <div class="col-md-6 card-body bg-tac"><span class="key">IDN: </span><span class="value">{{detectTrackIdentity identity}}</span></div>     
                </div> 

                <!--{{#if latitude}}
                <div class="card-body bg-tic">Latitude<span class="value">{{latitude}}</span></div> 
                {{/if}}
                {{#if longitude}}
                <div class="card-body bg-tac">Longitude<span class="value">{{longitude}}</span></div> 
                {{/if}}-->
                {{#if ship_type}}
                <!--<div class="card-body bg-tic">Ship Type<span class="value">{{ship_type}}</span></div> -->
                {{/if}}   
               
</script>




<div ng-controller="tacticalController">
 <!--<div id="tactical_mapid"></div>-->
<div class="application">
        <!-- <div class="col-md-9" id="leaflet_map" style="padding: 0"> -->
           <div class="dynamic_page_tactical_header_bulletin">
            <div class="row" style="margin: 0">
                <span class="col-md-1">
                    <a href="#!">
                    <img class="float-left" src="../assets/img/icon/home_icon.png" width="30px">                        
                    </a>
                    <!--<div class="float-left" ng-click="makeScreenToOwnCenter()">Tactical View</div>   -->
                </span>
                <span class="col-md-5">
                      <form class="toggle_radio" onclick="changeLayer()">
                        <input type="radio" checked class="toggle_option" value="PF" id="PF" name="switches">
                        <input type="radio" class="toggle_option" value="NET_UNIT" id="NET_UNIT" name="switches">
                        <input type="radio" class="toggle_option" value="COP" id="COP" name="switches">
                        <label for="PF"><p>Platform</p></label>
                        <!--<label for="NET_UNIT"><p>{{force}}</p></label>-->
                        <label for="NET_UNIT"><p>Own Force</p></label>                        
                        <label for="COP"><p>COP</p></label>
                        <div class="toggle_option_slider">
                        </div>
                      </form>
                </span>
                <span class="col-md-4">
                    <li class="nav-item currentSystemTactical">
                        <!--<span>Latitude:  <span class="value" id="ownLatTactical">{{ownLatitude}}</span></span>-->
                        <label id="ownPositionLatTactical">{{ownLatitude}}</label>
                        <span>&nbsp;|&nbsp;</span>
                        <label id="ownPositionLongTactical">{{ownLongitude}}</label>
                      </li>
                </span>
                <span class="col-md-2">
                    <li class="nav-item currentSystemTimeTactical">
                        <label id="currentSystemTimeTactical">{{currentTime}}</label>
                        <span>&nbsp;|&nbsp;</span>                      
                        <label id="currentSystemDateTactical">{{currentDate}}</label>
                    </li>
                </span>
            </div>
            </div>


        <div id="leaflet_map" style="padding: 0">
            <div id="tactical_map">
            </div>
            

            <div class="own_tote_area sidebarnav_own_tote">
            <!--<div class="text-center tote_title">OWN TRACK DETAILS</div>-->
                    <div class="own_ship_details">
                        <label class="label"><span class="key">Course</span> &nbsp;<span class="value"><span id="ownPositionCOGTactical">0</span> &nbsp;<sup>&#176</sup></span></label>
                        <label class="label"><span class="key">Speed </span>&nbsp;<span class="value"><span id="ownPositionSOGTactical">0</span> &nbsp;Kn</span></label>
                    </div>
            <div class="tote_title">Track Table <span id="tote_entity_selected" class="entity_selected"></span><span id="entity_source" class="entity_source"></span><i class="float-right fa fa-angle-down"></i></div>
            <!--<div class="tote_title" ng-click="track_tote_display()">Track Table <span id="tote_entity_selected" class="entity_selected"></span><i class="float-right fa fa-angle-down"></i></div>-->
            <div id="track_tote" class="sidebarnav_track_tote content_inside_sidebar">        
                <div class="track_tote_area">
                <!--<div class="text-center defaultToteMessage">-->
                    <!--Please Select a Track-->
                <!--</div>-->
                <!--<div class="card-body bg-tac">REP: <span class="card-header text-center float-right"></span></div>                                                 -->
                 <div class="row m-0">
                    <div class="col-md-6 card-body bg-tic"><span class="key">RNG: </span><span class="value"></span></div>   
                    <div class="col-md-6 card-body bg-tic"><span class="key">LBL: </span><span class="value"></span></div>                     
                </div>  
                <div class="row m-0">
                    <div class="col-md-6 card-body bg-tac"><span class="key">BRG: </span><span class="value"></span></div>   
                    <div class="col-md-6 card-body bg-tac"><span class="key">CPA: </span><span class="value"></span></div>                     
                </div>  
                <div class="row m-0">          
                    <div class="col-md-6 card-body bg-tic"><span class="key">CRS: </span><span class="value"></span></div>                   
                    <div class="col-md-6 card-body bg-tic"><span class="key">BCPA: </span><span class="value"></span></div>     
                </div>  
                <div class="row m-0">          
                    <div class="col-md-6 card-body bg-tac"><span class="key">SPD: </span><span class="value"></span></div>                          
                    <div class="col-md-6 card-body bg-tac"><span class="key">TCPA: </span><span class="value"></span></div>     
                </div> 
                 <div class="row m-0">          
                    <div class="col-md-6 card-body bg-tac"><span class="key">CAT: </span><span class="value"></span></div>                          
                    <div class="col-md-6 card-body bg-tac"><span class="key">IDN: </span><span class="value"></span></div>     
                </div> 
                </div>
            </div>
            <div id="track_table" class="tote_title" style="border-top: 2px solid #363e50"><span id="track_table_title">Force Table</span><i class="float-right fa fa-angle-down"></i></div>
            </div>  
            <div  id="track_list" class="sidebarnav_track_cop_track cop_heading_card">
                <div class="cop-trac-list-search">
                    <input type="text" class="search form-control" placeholder="Search">
                </div>
                <table class="table table-hover table-bordered results table-fixed" style="font-size: 12px">
                <thead>
                    <tr class="row m-0">
                    <th class="col-md-3">LABEL</th>
                    <th class="col-md-3">REP</th>
                    <th class="col-md-3">RNG (nm)</th>
                    <th class="col-md-3">BRG (deg)</th>
                    </tr>
                    
                </thead>
                <tbody id="copTrackListArea" class="copTrackListArea">
                      
                </tbody>
                </table>  
        
            </div>

                <div class="mousePositionLatLong" id="mousePositionLatLong">
                <div class="row m-0">
                    <div class="col-md-6 pl-0">
                        RNG:
                    <span id="mouse_range" class="value">N/A</span>
                    </div>
                    <div class="col-md-6 pl-0">
                        BRG: 
                    <span id="mouse_bearing" class="value">N/A</span>
                    </div>
                </div>
                <div class="row m-0">
                    <div class="col-md-6 pl-0">
                        LAT:
                    <span id="mouse_lat" class="value">N/A</span>
                    </div>      
                    <div class="col-md-6 pl-0">
                        LNG:
                    <span id="mouse_long" class="value">N/A</span>
                    </div>
                </div>
                </div> 

                <!--<div class="mousePositionRangeBearing" id="mousePositionRangeBearing">
                <label class="key">RNG: <span id="mouse_range" class="value">N/A</span></label>
                <label class="key">BRG: <span id="mouse_bearing" class="value">N/A</span></label>
                </div>   -->
        

            <div class="row map_footer">
                <div class="col-md-4">
                 </div>   
                 <div class="col-md-4 on_off_rangeCircle">
                    <span class="value" ng-click="zoomIn()"><i class="fa fa-arrow-left"></i></span>
                    <span id="current_range_naut" class="value">{{currentRange}}</span>
                    <span class="value" ng-click="zoomOut()" ><i class="fa fa-arrow-right"></i></span>
                </div> 
            </div>
        </div>
          
                
       
</div>

<script>

     $(document).ready(function() {
                $(".search").keyup(function () {
                    var searchTerm = $(".search").val();
                    var listItem = $('.results tbody').children('tr');
                    var searchSplit = searchTerm.replace(/ /g, "'):containsi('")
                    
                $.extend($.expr[':'], {'containsi': function(elem, i, match, array){
                        return (elem.textContent || elem.innerText || '').toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
                    }
                });

                $(".results tbody tr").not(":containsi('" + searchSplit + "')").each(function(e){
                    $(this).attr('visible','false');
                });

                $(".results tbody tr:containsi('" + searchSplit + "')").each(function(e){
                    $(this).attr('visible','true');
                });

                var jobCount = $('.results tbody tr[visible="true"]').length;
                    $('.counter').text(jobCount + ' item');

                //   if(jobCount == '0') {$('.no-result').show();}
                //     else {$('.no-result').hide();}

                    // if(jobCount == '0') {$('.no-result').show();}
                    // else {$('.no-result').hide();}
                });
                // var currentStyleTactical = false;
                // $('.currentSystemTactical').click(()=>{
                //     if(currentStyleTactical){
                //     $('.currentSystemTactical').attr('style',"z-index:0");
                //     currentStyleTactical = false;                    
                //     }else{
                //     $('.currentSystemTactical').attr('style',"z-index:401");                    
                //     currentStyleTactical = true;    
                //     }
                // })

                // $(".mousePositionLatLong").click(()=>{
                //     document.getElementById('mousePositionLatLong').style.display = "none";                    
                //     document.getElementById('mousePositionRangeBearing').style.display = "block";                   
                // });
                // $(".mousePositionRangeBearing").click(()=>{
                //     document.getElementById('mousePositionRangeBearing').style.display = "none";                              
                //       document.getElementById('mousePositionLatLong').style.display = "block";                    
                // });

                });

    function closeCOPNav(){
        document.getElementById("cop_track_list").style.width = "0";
    }
</script>

<script>
var url ="../Services/Tactical/leafletMap.js";
$.getScript(url);
</script>
<script src="../assets/js/tactical/leaflet-mapbox-gl.js"></script>

</div>